<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BÃ i Test IQ - ÄÃ¡nh GiÃ¡ NÄƒng Lá»±c Nháº­n Thá»©c</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@500&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #1e40af;
            --primary-dark: #1e3a8a;
            --primary-light: #3b82f6;
            --accent: #f59e0b;
            --success: #10b981;
            --danger: #ef4444;
            --bg-gradient: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%);
            --card-bg: rgba(30, 41, 59, 0.8);
            --text: #f1f5f9;
            --text-muted: #94a3b8;
            --border: rgba(148, 163, 184, 0.2);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Plus Jakarta Sans', -apple-system, sans-serif;
            background: var(--bg-gradient);
            color: var(--text);
            min-height: 100vh;
            line-height: 1.6;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: 
                radial-gradient(circle at 20% 20%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(245, 158, 11, 0.08) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }

        .container { max-width: 900px; margin: 0 auto; padding: 20px; position: relative; z-index: 1; }

        .header { text-align: center; padding: 40px 20px; margin-bottom: 30px; }

        .logo { display: inline-flex; align-items: center; gap: 12px; margin-bottom: 20px; }

        .logo-icon {
            width: 56px; height: 56px;
            background: linear-gradient(135deg, var(--primary-light), var(--accent));
            border-radius: 16px;
            display: flex; align-items: center; justify-content: center;
            font-size: 28px;
            box-shadow: 0 8px 32px rgba(59, 130, 246, 0.3);
        }

        .logo-text {
            font-size: 28px; font-weight: 800;
            background: linear-gradient(135deg, #fff, var(--primary-light));
            -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
        }

        .progress-container {
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 24px;
            border: 1px solid var(--border);
        }

        .progress-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
        .progress-info { display: flex; gap: 24px; }
        .progress-item { display: flex; align-items: center; gap: 8px; }

        .progress-item-icon {
            width: 36px; height: 36px;
            background: rgba(59, 130, 246, 0.2);
            border-radius: 10px;
            display: flex; align-items: center; justify-content: center;
            font-size: 18px;
        }

        .progress-item-label { font-size: 12px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; }
        .progress-item-value { font-family: 'JetBrains Mono', monospace; font-size: 18px; font-weight: 600; color: var(--text); }

        .timer-warning { color: var(--danger); animation: pulse 1s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }

        .progress-bar-track { height: 8px; background: rgba(148, 163, 184, 0.2); border-radius: 4px; overflow: hidden; }
        .progress-bar-fill { height: 100%; background: linear-gradient(90deg, var(--primary-light), var(--accent)); border-radius: 4px; transition: width 0.5s ease; }

        .question-card {
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 32px;
            border: 1px solid var(--border);
            margin-bottom: 24px;
            animation: slideIn 0.4s ease;
        }

        @keyframes slideIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .question-badge {
            display: inline-flex; align-items: center; gap: 8px;
            padding: 6px 14px;
            background: rgba(59, 130, 246, 0.2);
            border-radius: 20px;
            font-size: 13px; font-weight: 600;
            color: var(--primary-light);
            margin-bottom: 20px;
        }

        .question-text { font-size: 20px; font-weight: 600; margin-bottom: 28px; line-height: 1.5; }

        .matrix-container { display: flex; justify-content: center; margin-bottom: 32px; }

        .matrix {
            display: grid; gap: 8px; padding: 20px;
            background: rgba(15, 23, 42, 0.6);
            border-radius: 16px;
            border: 2px solid var(--border);
        }

        .matrix-3x3 { grid-template-columns: repeat(3, 80px); grid-template-rows: repeat(3, 80px); }

        .matrix-cell {
            background: rgba(241, 245, 249, 0.95);
            border-radius: 12px;
            display: flex; align-items: center; justify-content: center;
            font-size: 32px; font-weight: 700;
            color: #1e293b;
        }

        .matrix-cell.question-mark {
            background: linear-gradient(135deg, var(--accent), #fbbf24);
            color: #fff;
            font-size: 36px;
            box-shadow: 0 4px 20px rgba(245, 158, 11, 0.4);
        }

        .options-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; }
        @media (max-width: 600px) { .options-grid { grid-template-columns: 1fr; } }

        .option-btn {
            background: rgba(30, 41, 59, 0.6);
            border: 2px solid var(--border);
            border-radius: 16px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex; align-items: center; gap: 16px;
            text-align: left;
        }

        .option-btn:hover { background: rgba(59, 130, 246, 0.15); border-color: var(--primary-light); transform: translateY(-2px); }
        .option-btn.selected { background: rgba(59, 130, 246, 0.25); border-color: var(--primary-light); box-shadow: 0 0 20px rgba(59, 130, 246, 0.2); }

        .option-letter {
            width: 44px; height: 44px;
            background: rgba(148, 163, 184, 0.2);
            border-radius: 12px;
            display: flex; align-items: center; justify-content: center;
            font-weight: 700; font-size: 18px;
            color: var(--text-muted);
            flex-shrink: 0;
        }

        .option-btn.selected .option-letter { background: var(--primary-light); color: #fff; }
        .option-content { flex: 1; font-size: 16px; color: var(--text); font-weight: 500; }

        .option-visual {
            width: 60px; height: 60px;
            background: rgba(241, 245, 249, 0.95);
            border-radius: 10px;
            display: flex; align-items: center; justify-content: center;
            font-size: 28px; font-weight: 700;
            color: #1e293b;
        }

        .nav-buttons { display: flex; justify-content: space-between; gap: 16px; }

        .btn {
            padding: 16px 32px;
            border-radius: 14px;
            font-size: 16px; font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            display: flex; align-items: center; gap: 10px;
        }

        .btn-secondary { background: rgba(148, 163, 184, 0.2); color: var(--text); }
        .btn-secondary:hover { background: rgba(148, 163, 184, 0.3); }

        .btn-primary { background: linear-gradient(135deg, var(--primary-light), var(--primary)); color: #fff; box-shadow: 0 4px 20px rgba(59, 130, 246, 0.3); }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 6px 30px rgba(59, 130, 246, 0.4); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }

        .start-screen { text-align: center; padding: 60px 20px; }
        .start-screen h1 { font-size: 42px; font-weight: 800; margin-bottom: 16px; background: linear-gradient(135deg, #fff, var(--primary-light)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .start-screen p { color: var(--text-muted); font-size: 18px; max-width: 600px; margin: 0 auto 40px; }

        .info-cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 40px; }

        .info-card {
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 28px;
            border: 1px solid var(--border);
        }

        .info-card-icon { width: 56px; height: 56px; background: rgba(59, 130, 246, 0.2); border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 28px; margin-bottom: 16px; }
        .info-card h3 { font-size: 18px; margin-bottom: 8px; }
        .info-card p { font-size: 14px; color: var(--text-muted); margin: 0; }

        .user-form { max-width: 400px; margin: 0 auto 32px; }
        .form-group { margin-bottom: 20px; text-align: left; }
        .form-label { display: block; font-size: 14px; font-weight: 600; margin-bottom: 8px; color: var(--text); }

        .form-input {
            width: 100%;
            padding: 14px 18px;
            background: rgba(30, 41, 59, 0.8);
            border: 2px solid var(--border);
            border-radius: 12px;
            color: var(--text);
            font-size: 16px;
            font-family: inherit;
        }

        .form-input:focus { outline: none; border-color: var(--primary-light); box-shadow: 0 0 20px rgba(59, 130, 246, 0.2); }
        .form-input::placeholder { color: var(--text-muted); }

        .btn-start { padding: 18px 48px; font-size: 18px; background: linear-gradient(135deg, var(--accent), #d97706); box-shadow: 0 8px 32px rgba(245, 158, 11, 0.3); }
        .btn-start:hover { box-shadow: 0 12px 40px rgba(245, 158, 11, 0.4); }

        .results-screen { text-align: center; padding: 40px 20px; }

        .results-card {
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            border-radius: 32px;
            padding: 48px;
            border: 1px solid var(--border);
            margin-bottom: 32px;
        }

        .score-circle {
            width: 200px; height: 200px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-light), var(--primary));
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            margin: 0 auto 32px;
            box-shadow: 0 20px 60px rgba(59, 130, 246, 0.4);
            position: relative;
        }

        .score-circle::before { content: ''; position: absolute; inset: 8px; border-radius: 50%; background: var(--card-bg); }
        .score-content { position: relative; z-index: 1; }
        .score-label { font-size: 14px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px; }
        .score-value { font-size: 56px; font-weight: 800; background: linear-gradient(135deg, var(--primary-light), var(--accent)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }

        .result-classification { font-size: 28px; font-weight: 700; margin-bottom: 12px; color: var(--accent); }
        .result-description { color: var(--text-muted); font-size: 16px; max-width: 500px; margin: 0 auto 32px; }

        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 20px; margin-bottom: 32px; }
        .stat-item { background: rgba(15, 23, 42, 0.5); border-radius: 16px; padding: 24px; }
        .stat-value { font-size: 32px; font-weight: 700; color: var(--primary-light); margin-bottom: 4px; }
        .stat-label { font-size: 13px; color: var(--text-muted); }

        .breakdown-section { text-align: left; margin-top: 32px; padding-top: 32px; border-top: 1px solid var(--border); }
        .breakdown-title { font-size: 18px; font-weight: 700; margin-bottom: 20px; }
        .breakdown-item { display: flex; align-items: center; gap: 16px; margin-bottom: 16px; }
        .breakdown-icon { width: 48px; height: 48px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 24px; flex-shrink: 0; }
        .breakdown-info { flex: 1; }
        .breakdown-name { font-weight: 600; margin-bottom: 4px; }
        .breakdown-bar { height: 8px; background: rgba(148, 163, 184, 0.2); border-radius: 4px; overflow: hidden; }
        .breakdown-fill { height: 100%; border-radius: 4px; transition: width 1s ease; }
        .breakdown-score { font-family: 'JetBrains Mono', monospace; font-size: 16px; font-weight: 600; min-width: 60px; text-align: right; }

        .save-status { display: inline-flex; align-items: center; gap: 8px; padding: 12px 20px; background: rgba(16, 185, 129, 0.2); border-radius: 12px; color: var(--success); font-size: 14px; margin-bottom: 24px; }
        .save-status.error { background: rgba(239, 68, 68, 0.2); color: var(--danger); }
        .save-status.pending { background: rgba(245, 158, 11, 0.2); color: var(--accent); }

        .hidden { display: none !important; }
        .spinner { width: 20px; height: 20px; border: 2px solid transparent; border-top-color: currentColor; border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }

        @media (max-width: 600px) {
            .header { padding: 24px 16px; }
            .question-card { padding: 24px; }
            .matrix-3x3 { grid-template-columns: repeat(3, 60px); grid-template-rows: repeat(3, 60px); }
            .matrix-cell { font-size: 24px; }
            .start-screen h1 { font-size: 32px; }
            .score-circle { width: 160px; height: 160px; }
            .score-value { font-size: 44px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Start Screen -->
        <div id="startScreen" class="start-screen">
            <div class="logo">
                <div class="logo-icon">ğŸ§ </div>
                <span class="logo-text">IQ Assessment</span>
            </div>
            
            <h1>BÃ i Kiá»ƒm Tra NÄƒng Lá»±c Nháº­n Thá»©c</h1>
            <p>BÃ i test Ä‘Æ°á»£c thiáº¿t káº¿ dá»±a trÃªn mÃ´ hÃ¬nh Raven's Progressive Matrices vÃ  cÃ¡c chuáº©n Ä‘o lÆ°á»ng IQ quá»‘c táº¿, Ä‘Ã¡nh giÃ¡ kháº£ nÄƒng tÆ° duy logic, nháº­n dáº¡ng pattern vÃ  giáº£i quyáº¿t váº¥n Ä‘á».</p>
            
            <div class="info-cards">
                <div class="info-card">
                    <div class="info-card-icon">ğŸ“</div>
                    <h3>30 CÃ¢u Há»i</h3>
                    <p>4 dáº¡ng bÃ i: Pattern, Sá»‘ há»c, KhÃ´ng gian, NgÃ´n ngá»¯</p>
                </div>
                <div class="info-card">
                    <div class="info-card-icon">â±ï¸</div>
                    <h3>25 PhÃºt</h3>
                    <p>Thá»i gian giá»›i háº¡n Ä‘á»ƒ hoÃ n thÃ nh toÃ n bá»™ bÃ i test</p>
                </div>
                <div class="info-card">
                    <div class="info-card-icon">ğŸ²</div>
                    <h3>5 Bá»™ Äá»</h3>
                    <p>Random bá»™ Ä‘á» má»—i láº§n lÃ m, Ä‘áº£m báº£o cÃ´ng báº±ng</p>
                </div>
            </div>

            <div class="user-form">
                <div class="form-group">
                    <label class="form-label">Há» vÃ  tÃªn *</label>
                    <input type="text" id="userName" class="form-input" placeholder="Nháº­p há» tÃªn Ä‘áº§y Ä‘á»§" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Email cÃ´ng ty *</label>
                    <input type="email" id="userEmail" class="form-input" placeholder="email@company.com" required>
                </div>
                <div class="form-group">
                    <label class="form-label">PhÃ²ng ban</label>
                    <select id="department" class="form-input">
                        <option value="">-- Chá»n phÃ²ng ban --</option>
                        <option value="Marketing">Marketing</option>
                        <option value="Sales">Sales (Kinh doanh)</option>
                        <option value="Production">Production (Sáº£n xuáº¥t)</option>
                        <option value="Purchasing">Purchasing (Mua hÃ ng)</option>
                        <option value="Accounting">Accounting (Káº¿ toÃ¡n)</option>
                        <option value="Operations">Operations (Váº­n hÃ nh)</option>
                        <option value="HR">HR (NhÃ¢n sá»±)</option>
                        <option value="Assistant">Assistant (Trá»£ lÃ½)</option>
                        <option value="Other">KhÃ¡c</option>
                    </select>
                </div>
            </div>

            <button class="btn btn-primary btn-start" onclick="startTest()">
                Báº¯t Äáº§u LÃ m BÃ i
                <span>â†’</span>
            </button>
        </div>

        <!-- Test Screen -->
        <div id="testScreen" class="hidden">
            <div class="header">
                <div class="logo">
                    <div class="logo-icon">ğŸ§ </div>
                    <span class="logo-text">IQ Assessment</span>
                </div>
            </div>

            <div class="progress-container">
                <div class="progress-header">
                    <div class="progress-info">
                        <div class="progress-item">
                            <div class="progress-item-icon">ğŸ“</div>
                            <div>
                                <div class="progress-item-label">CÃ¢u há»i</div>
                                <div class="progress-item-value"><span id="currentQ">1</span>/30</div>
                            </div>
                        </div>
                        <div class="progress-item">
                            <div class="progress-item-icon">â±ï¸</div>
                            <div>
                                <div class="progress-item-label">Thá»i gian</div>
                                <div class="progress-item-value" id="timer">25:00</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="progress-bar-track">
                    <div class="progress-bar-fill" id="progressBar" style="width: 3.33%"></div>
                </div>
            </div>

            <div class="question-card">
                <div class="question-badge" id="categoryBadge">
                    <span>ğŸ”·</span>
                    <span id="categoryName">Pattern Recognition</span>
                </div>
                
                <div class="question-text" id="questionText"></div>
                <div id="visualArea" class="matrix-container"></div>
                <div class="options-grid" id="optionsArea"></div>
            </div>

            <div class="nav-buttons">
                <button class="btn btn-secondary" id="prevBtn" onclick="prevQuestion()" disabled>
                    <span>â†</span> CÃ¢u trÆ°á»›c
                </button>
                <button class="btn btn-primary" id="nextBtn" onclick="nextQuestion()">
                    CÃ¢u tiáº¿p <span>â†’</span>
                </button>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="resultsScreen" class="hidden">
            <div class="results-screen">
                <div class="logo">
                    <div class="logo-icon">ğŸ§ </div>
                    <span class="logo-text">IQ Assessment</span>
                </div>

                <div class="results-card">
                    <div id="saveStatus" class="save-status pending">
                        <div class="spinner"></div>
                        <span>Äang lÆ°u káº¿t quáº£...</span>
                    </div>

                    <div class="score-circle">
                        <div class="score-content">
                            <div class="score-label">Äiá»ƒm IQ</div>
                            <div class="score-value" id="iqScore">--</div>
                        </div>
                    </div>

                    <div class="result-classification" id="classification">--</div>
                    <div class="result-description" id="resultDesc">--</div>

                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-value" id="correctCount">--</div>
                            <div class="stat-label">CÃ¢u Ä‘Ãºng / 30</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="percentile">--</div>
                            <div class="stat-label">Percentile</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="timeTaken">--</div>
                            <div class="stat-label">Thá»i gian lÃ m bÃ i</div>
                        </div>
                    </div>

                    <div class="breakdown-section">
                        <h3 class="breakdown-title">PhÃ¢n tÃ­ch chi tiáº¿t theo danh má»¥c</h3>
                        
                        <div class="breakdown-item">
                            <div class="breakdown-icon" style="background: rgba(59, 130, 246, 0.2)">ğŸ”·</div>
                            <div class="breakdown-info">
                                <div class="breakdown-name">Pattern Recognition (Ma tráº­n)</div>
                                <div class="breakdown-bar">
                                    <div class="breakdown-fill" id="patternBar" style="background: #3b82f6; width: 0%"></div>
                                </div>
                            </div>
                            <div class="breakdown-score" id="patternScore">--/10</div>
                        </div>

                        <div class="breakdown-item">
                            <div class="breakdown-icon" style="background: rgba(16, 185, 129, 0.2)">ğŸ”¢</div>
                            <div class="breakdown-info">
                                <div class="breakdown-name">Number Sequences (DÃ£y sá»‘)</div>
                                <div class="breakdown-bar">
                                    <div class="breakdown-fill" id="numberBar" style="background: #10b981; width: 0%"></div>
                                </div>
                            </div>
                            <div class="breakdown-score" id="numberScore">--/8</div>
                        </div>

                        <div class="breakdown-item">
                            <div class="breakdown-icon" style="background: rgba(168, 85, 247, 0.2)">ğŸ“</div>
                            <div class="breakdown-info">
                                <div class="breakdown-name">Spatial Reasoning (KhÃ´ng gian)</div>
                                <div class="breakdown-bar">
                                    <div class="breakdown-fill" id="spatialBar" style="background: #a855f7; width: 0%"></div>
                                </div>
                            </div>
                            <div class="breakdown-score" id="spatialScore">--/7</div>
                        </div>

                        <div class="breakdown-item">
                            <div class="breakdown-icon" style="background: rgba(245, 158, 11, 0.2)">ğŸ’¬</div>
                            <div class="breakdown-info">
                                <div class="breakdown-name">Verbal Analogies (TÆ°Æ¡ng tá»± tá»«)</div>
                                <div class="breakdown-bar">
                                    <div class="breakdown-fill" id="verbalBar" style="background: #f59e0b; width: 0%"></div>
                                </div>
                            </div>
                            <div class="breakdown-score" id="verbalScore">--/5</div>
                        </div>
                    </div>
                </div>

                <div style="display: flex; gap: 16px; justify-content: center; flex-wrap: wrap;">
                    <button class="btn btn-secondary" onclick="downloadResult()">ğŸ“„ Táº£i káº¿t quáº£</button>
                    <button class="btn btn-primary" onclick="restartTest()">ğŸ”„ LÃ m láº¡i bÃ i test</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ============================================
        // Cáº¤U HÃŒNH
        // ============================================
        const CONFIG = {
            GOOGLE_SCRIPT_URL: 'https://script.google.com/macros/s/AKfycbxRrMuf-z7IQlxa0xXI6xhM-rDAYw6nHmwgezJoBKW9CzfnoBMXiKsnf6y2pQNRyI8/exec'
        };

        // ============================================
        // 5 Bá»˜ Äá»€ TEST IQ
        // ============================================
        const questionSets = {
            // ================== Bá»˜ Äá»€ 1 ==================
            set1: [
                // PATTERN (10 cÃ¢u)
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'TÃ¬m hÃ¬nh phÃ¹ há»£p Ä‘á»ƒ Ä‘iá»n vÃ o Ã´ "?" trong ma tráº­n:', matrix: [['â–²', 'â– ', 'â—'], ['â– ', 'â—', 'â–²'], ['â—', 'â–²', '?']], options: ['â– ', 'â—', 'â–²', 'â—†'], answer: 0 },
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'TÃ¬m pattern vÃ  Ä‘iá»n vÃ o Ã´ trá»‘ng:', matrix: [['1', '2', '3'], ['4', '5', '6'], ['7', '8', '?']], options: ['9', '10', '6', '7'], answer: 0 },
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'XÃ¡c Ä‘á»‹nh quy luáº­t vÃ  tÃ¬m hÃ¬nh cÃ²n thiáº¿u:', matrix: [['â—', 'â—‘', 'â—'], ['â—‘', 'â—', 'â—'], ['â—', 'â—', '?']], options: ['â—‘', 'â—', 'â—', 'â—‹'], answer: 0 },
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'TÃ¬m sá»‘ phÃ¹ há»£p trong ma tráº­n:', matrix: [['2', '4', '6'], ['3', '6', '9'], ['4', '8', '?']], options: ['10', '12', '14', '16'], answer: 1 },
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'HoÃ n thÃ nh ma tráº­n theo quy luáº­t:', matrix: [['â˜…', 'â˜†', 'â˜…'], ['â˜†', 'â˜…', 'â˜†'], ['â˜…', 'â˜†', '?']], options: ['â˜…', 'â˜†', 'âœ¦', 'âœ§'], answer: 0 },
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'TÃ¬m quy luáº­t vÃ  Ä‘iá»n Ã´ cÃ²n thiáº¿u:', matrix: [['A', 'B', 'C'], ['D', 'E', 'F'], ['G', 'H', '?']], options: ['I', 'J', 'K', 'L'], answer: 0 },
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'XÃ¡c Ä‘á»‹nh pattern trong ma tráº­n:', matrix: [['â—‡', 'â—‡', 'â—†'], ['â—‡', 'â—†', 'â—†'], ['â—†', 'â—†', '?']], options: ['â—‡', 'â—†', 'â—‹', 'â—'], answer: 1 },
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'TÃ¬m sá»‘ theo quy luáº­t Fibonacci:', matrix: [['1', '1', '2'], ['3', '5', '8'], ['13', '21', '?']], options: ['34', '29', '26', '32'], answer: 0 },
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'HoÃ n thÃ nh ma tráº­n mÅ©i tÃªn:', matrix: [['â†’', 'â†“', 'â†'], ['â†‘', 'â†’', 'â†“'], ['â†', 'â†‘', '?']], options: ['â†’', 'â†“', 'â†', 'â†‘'], answer: 0 },
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'TÃ¬m pháº§n tá»­ cÃ²n thiáº¿u:', matrix: [['â—‹', 'â—', 'â—'], ['â—‹', 'â—', 'â—'], ['â—‹', 'â—', '?']], options: ['â—‹', 'â—', 'â—', 'â—‘'], answer: 2 },
                // NUMBER (8 cÃ¢u)
                { category: 'number', categoryName: 'Number Sequences', categoryIcon: 'ğŸ”¢', question: 'TÃ¬m sá»‘ tiáº¿p theo: 2, 4, 8, 16, 32, ?', options: ['48', '64', '56', '40'], answer: 1 },
                { category: 'number', categoryName: 'Number Sequences', categoryIcon: 'ğŸ”¢', question: 'Sá»‘ nÃ o tiáº¿p theo: 1, 4, 9, 16, 25, ?', options: ['30', '36', '49', '32'], answer: 1 },
                { category: 'number', categoryName: 'Number Sequences', categoryIcon: 'ğŸ”¢', question: 'HoÃ n thÃ nh dÃ£y sá»‘: 3, 6, 11, 18, 27, ?', options: ['38', '36', '35', '40'], answer: 0 },
                { category: 'number', categoryName: 'Number Sequences', categoryIcon: 'ğŸ”¢', question: 'TÃ¬m sá»‘ tiáº¿p theo: 2, 6, 12, 20, 30, ?', options: ['40', '42', '44', '46'], answer: 1 },
                { category: 'number', categoryName: 'Number Sequences', categoryIcon: 'ğŸ”¢', question: 'DÃ£y sá»‘: 5, 10, 20, 40, 80, ? Sá»‘ tiáº¿p theo lÃ :', options: ['100', '120', '160', '140'], answer: 2 },
                { category: 'number', categoryName: 'Number Sequences', categoryIcon: 'ğŸ”¢', question: 'TÃ¬m quy luáº­t: 1, 3, 7, 15, 31, ?', options: ['63', '47', '55', '61'], answer: 0 },
                { category: 'number', categoryName: 'Number Sequences', categoryIcon: 'ğŸ”¢', question: 'Sá»‘ cÃ²n thiáº¿u: 100, 81, 64, 49, 36, ?', options: ['25', '16', '30', '20'], answer: 0 },
                { category: 'number', categoryName: 'Number Sequences', categoryIcon: 'ğŸ”¢', question: 'HoÃ n thÃ nh dÃ£y sá»‘ nguyÃªn tá»‘: 2, 3, 5, 7, 11, 13, ?', options: ['15', '17', '19', '14'], answer: 1 },
                // SPATIAL (7 cÃ¢u)
                { category: 'spatial', categoryName: 'Spatial Reasoning', categoryIcon: 'ğŸ“', question: 'Náº¿u gáº­p hÃ¬nh vuÃ´ng theo Ä‘Æ°á»ng chÃ©o, hÃ¬nh nÃ o sáº½ Ä‘Æ°á»£c táº¡o ra?', options: ['Tam giÃ¡c vuÃ´ng', 'Tam giÃ¡c Ä‘á»u', 'HÃ¬nh bÃ¬nh hÃ nh', 'HÃ¬nh thoi'], answer: 0 },
                { category: 'spatial', categoryName: 'Spatial Reasoning', categoryIcon: 'ğŸ“', question: 'Xoay hÃ¬nh chá»¯ L 90Â° theo chiá»u kim Ä‘á»“ng há»“, chÃ¢n L hÆ°á»›ng nÃ o?', options: ['Sang pháº£i', 'LÃªn trÃªn', 'Sang trÃ¡i', 'Xuá»‘ng dÆ°á»›i'], answer: 0 },
                { category: 'spatial', categoryName: 'Spatial Reasoning', categoryIcon: 'ğŸ“', question: 'HÃ¬nh láº­p phÆ°Æ¡ng cÃ³ bao nhiÃªu cáº¡nh?', options: ['6', '8', '12', '10'], answer: 2 },
                { category: 'spatial', categoryName: 'Spatial Reasoning', categoryIcon: 'ğŸ“', question: 'Khi nhÃ¬n tá»« trÃªn xuá»‘ng, hÃ¬nh chÃ³p vuÃ´ng cÃ³ dáº¡ng:', options: ['HÃ¬nh vuÃ´ng', 'HÃ¬nh tam giÃ¡c', 'HÃ¬nh trÃ²n', 'HÃ¬nh thoi'], answer: 0 },
                { category: 'spatial', categoryName: 'Spatial Reasoning', categoryIcon: 'ğŸ“', question: 'Gáº¥p giáº¥y hÃ¬nh chá»¯ nháº­t Ä‘Ã´i 3 láº§n, má»Ÿ ra cÃ³ bao nhiÃªu Ã´?', options: ['6 Ã´', '8 Ã´', '4 Ã´', '12 Ã´'], answer: 1 },
                { category: 'spatial', categoryName: 'Spatial Reasoning', categoryIcon: 'ğŸ“', question: 'HÃ¬nh nÃ o cÃ³ thá»ƒ gáº¥p thÃ nh hÃ¬nh láº­p phÆ°Æ¡ng?', options: ['Chá»¯ tháº­p (6 Ã´ vuÃ´ng)', 'HÃ¬nh chá»¯ L (5 Ã´ vuÃ´ng)', 'HÃ ng ngang (6 Ã´ vuÃ´ng)', 'HÃ¬nh chá»¯ T (5 Ã´ vuÃ´ng)'], answer: 0 },
                { category: 'spatial', categoryName: 'Spatial Reasoning', categoryIcon: 'ğŸ“', question: 'Láº­t gÆ°Æ¡ng hÃ¬nh tam giÃ¡c hÆ°á»›ng lÃªn, tam giÃ¡c sáº½ hÆ°á»›ng:', options: ['Xuá»‘ng', 'Sang trÃ¡i', 'Sang pháº£i', 'Váº«n hÆ°á»›ng lÃªn'], answer: 3 },
                // VERBAL (5 cÃ¢u)
                { category: 'verbal', categoryName: 'Verbal Analogies', categoryIcon: 'ğŸ’¬', question: 'NÃ³ng : Láº¡nh = SÃ¡ng : ?', options: ['ÄÃªm', 'Tá»‘i', 'Má»', 'TrÆ°a'], answer: 1 },
                { category: 'verbal', categoryName: 'Verbal Analogies', categoryIcon: 'ğŸ’¬', question: 'Chim : Tá»• = NgÆ°á»i : ?', options: ['Äá»™ng váº­t', 'NhÃ ', 'CÃ´ng viá»‡c', 'Thá»©c Äƒn'], answer: 1 },
                { category: 'verbal', categoryName: 'Verbal Analogies', categoryIcon: 'ğŸ’¬', question: 'BÃ¡c sÄ© : Bá»‡nh viá»‡n = GiÃ¡o viÃªn : ?', options: ['Bá»‡nh nhÃ¢n', 'TrÆ°á»ng há»c', 'Há»c sinh', 'SÃ¡ch vá»Ÿ'], answer: 1 },
                { category: 'verbal', categoryName: 'Verbal Analogies', categoryIcon: 'ğŸ’¬', question: 'Máº¯t : NhÃ¬n = Tai : ?', options: ['Ã‚m thanh', 'Nghe', 'Tiáº¿ng Ä‘á»™ng', 'Nháº¡c'], answer: 1 },
                { category: 'verbal', categoryName: 'Verbal Analogies', categoryIcon: 'ğŸ’¬', question: 'NÄƒm : ThÃ¡ng = Tuáº§n : ?', options: ['Giá»', 'NgÃ y', 'PhÃºt', 'Tháº¿ ká»·'], answer: 1 }
            ],

            // ================== Bá»˜ Äá»€ 2 ==================
            set2: [
                // PATTERN (10 cÃ¢u)
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'TÃ¬m hÃ¬nh cÃ²n thiáº¿u trong ma tráº­n:', matrix: [['â—', 'â—', 'â—‹'], ['â—', 'â—‹', 'â—‹'], ['â—‹', 'â—‹', '?']], options: ['â—', 'â—‹', 'â—', 'â—‘'], answer: 0 },
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'Äiá»n sá»‘ vÃ o Ã´ trá»‘ng:', matrix: [['2', '4', '8'], ['16', '32', '64'], ['128', '256', '?']], options: ['512', '384', '320', '480'], answer: 0 },
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'XÃ¡c Ä‘á»‹nh quy luáº­t:', matrix: [['â™ ', 'â™¥', 'â™¦'], ['â™¥', 'â™¦', 'â™£'], ['â™¦', 'â™£', '?']], options: ['â™ ', 'â™¥', 'â™¦', 'â™£'], answer: 0 },
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'TÃ¬m sá»‘ theo quy luáº­t nhÃ¢n:', matrix: [['1', '2', '4'], ['2', '4', '8'], ['3', '6', '?']], options: ['9', '12', '18', '10'], answer: 1 },
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'HoÃ n thÃ nh ma tráº­n chá»¯ cÃ¡i:', matrix: [['Z', 'Y', 'X'], ['W', 'V', 'U'], ['T', 'S', '?']], options: ['R', 'Q', 'P', 'O'], answer: 0 },
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'TÃ¬m hÃ¬nh theo quy luáº­t xoay:', matrix: [['â†‘', 'â†’', 'â†“'], ['â†’', 'â†“', 'â†'], ['â†“', 'â†', '?']], options: ['â†‘', 'â†’', 'â†“', 'â†'], answer: 0 },
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'Äiá»n sá»‘ vÃ o ma tráº­n:', matrix: [['5', '10', '15'], ['10', '15', '20'], ['15', '20', '?']], options: ['25', '30', '35', '22'], answer: 0 },
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'TÃ¬m pháº§n tá»­ thiáº¿u:', matrix: [['â–¡', 'â– ', 'â–¡'], ['â– ', 'â–¡', 'â– '], ['â–¡', 'â– ', '?']], options: ['â–¡', 'â– ', 'â–£', 'â–¢'], answer: 0 },
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'XÃ¡c Ä‘á»‹nh pattern sá»‘:', matrix: [['1', '3', '5'], ['7', '9', '11'], ['13', '15', '?']], options: ['17', '16', '18', '19'], answer: 0 },
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'HoÃ n thÃ nh dÃ£y hÃ¬nh:', matrix: [['â—†', 'â—‡', 'â—†'], ['â—‡', 'â—†', 'â—‡'], ['â—†', 'â—‡', '?']], options: ['â—†', 'â—‡', 'â—‹', 'â—'], answer: 0 },
                // NUMBER (8 cÃ¢u)
                { category: 'number', categoryName: 'Number Sequences', categoryIcon: 'ğŸ”¢', question: 'TÃ¬m sá»‘ tiáº¿p theo: 3, 6, 12, 24, 48, ?', options: ['72', '96', '84', '60'], answer: 1 },
                { category: 'number', categoryName: 'Number Sequences', categoryIcon: 'ğŸ”¢', question: 'Sá»‘ nÃ o tiáº¿p theo: 1, 8, 27, 64, 125, ?', options: ['196', '216', '256', '180'], answer: 1 },
                { category: 'number', categoryName: 'Number Sequences', categoryIcon: 'ğŸ”¢', question: 'HoÃ n thÃ nh dÃ£y: 2, 5, 10, 17, 26, ?', options: ['35', '37', '36', '38'], answer: 1 },
                { category: 'number', categoryName: 'Number Sequences', categoryIcon: 'ğŸ”¢', question: 'TÃ¬m sá»‘ tiáº¿p theo: 1, 2, 4, 7, 11, ?', options: ['15', '16', '14', '17'], answer: 1 },
                { category: 'number', categoryName: 'Number Sequences', categoryIcon: 'ğŸ”¢', question: 'DÃ£y sá»‘: 81, 27, 9, 3, ? Sá»‘ tiáº¿p theo lÃ :', options: ['1', '0', '2', '-1'], answer: 0 },
                { category: 'number', categoryName: 'Number Sequences', categoryIcon: 'ğŸ”¢', question: 'TÃ¬m quy luáº­t: 2, 6, 18, 54, ?', options: ['108', '162', '148', '172'], answer: 1 },
                { category: 'number', categoryName: 'Number Sequences', categoryIcon: 'ğŸ”¢', question: 'Sá»‘ cÃ²n thiáº¿u: 144, 121, 100, 81, 64, ?', options: ['49', '36', '56', '42'], answer: 0 },
                { category: 'number', categoryName: 'Number Sequences', categoryIcon: 'ğŸ”¢', question: 'HoÃ n thÃ nh: 0, 1, 1, 2, 3, 5, 8, ?', options: ['11', '13', '12', '10'], answer: 1 },
                // SPATIAL (7 cÃ¢u)
                { category: 'spatial', categoryName: 'Spatial Reasoning', categoryIcon: 'ğŸ“', question: 'HÃ¬nh trá»¥ cÃ³ bao nhiÃªu máº·t?', options: ['2', '3', '4', '1'], answer: 1 },
                { category: 'spatial', categoryName: 'Spatial Reasoning', categoryIcon: 'ğŸ“', question: 'Xoay hÃ¬nh vuÃ´ng 45Â°, nÃ³ trÃ´ng giá»‘ng hÃ¬nh gÃ¬?', options: ['HÃ¬nh thoi', 'HÃ¬nh chá»¯ nháº­t', 'HÃ¬nh bÃ¬nh hÃ nh', 'HÃ¬nh tam giÃ¡c'], answer: 0 },
                { category: 'spatial', categoryName: 'Spatial Reasoning', categoryIcon: 'ğŸ“', question: 'HÃ¬nh cáº§u cÃ³ bao nhiÃªu Ä‘á»‰nh?', options: ['1', '2', '0', 'VÃ´ sá»‘'], answer: 2 },
                { category: 'spatial', categoryName: 'Spatial Reasoning', categoryIcon: 'ğŸ“', question: 'Khi cáº¯t hÃ¬nh láº­p phÆ°Æ¡ng báº±ng máº·t pháº³ng ngang, máº·t cáº¯t cÃ³ dáº¡ng:', options: ['HÃ¬nh vuÃ´ng', 'HÃ¬nh trÃ²n', 'HÃ¬nh tam giÃ¡c', 'HÃ¬nh lá»¥c giÃ¡c'], answer: 0 },
                { category: 'spatial', categoryName: 'Spatial Reasoning', categoryIcon: 'ğŸ“', question: 'Gáº¥p tá» giáº¥y lÃ m Ä‘Ã´i 4 láº§n, má»Ÿ ra cÃ³ bao nhiÃªu náº¿p?', options: ['8', '15', '16', '12'], answer: 1 },
                { category: 'spatial', categoryName: 'Spatial Reasoning', categoryIcon: 'ğŸ“', question: 'HÃ¬nh tá»© diá»‡n Ä‘á»u cÃ³ bao nhiÃªu máº·t?', options: ['3', '4', '5', '6'], answer: 1 },
                { category: 'spatial', categoryName: 'Spatial Reasoning', categoryIcon: 'ğŸ“', question: 'Xoay hÃ¬nh chá»¯ nháº­t 180Â°, káº¿t quáº£ lÃ :', options: ['Giá»‘ng hÃ¬nh ban Ä‘áº§u', 'HÃ¬nh vuÃ´ng', 'HÃ¬nh thoi', 'HÃ¬nh bÃ¬nh hÃ nh'], answer: 0 },
                // VERBAL (5 cÃ¢u)
                { category: 'verbal', categoryName: 'Verbal Analogies', categoryIcon: 'ğŸ’¬', question: 'SÃ¡ch : Äá»c = Nháº¡c : ?', options: ['Viáº¿t', 'Nghe', 'HÃ¡t', 'ChÆ¡i'], answer: 1 },
                { category: 'verbal', categoryName: 'Verbal Analogies', categoryIcon: 'ğŸ’¬', question: 'CÃ¡ : NÆ°á»›c = Chim : ?', options: ['Trá»i', 'CÃ¢y', 'Äáº¥t', 'KhÃ´ng khÃ­'], answer: 0 },
                { category: 'verbal', categoryName: 'Verbal Analogies', categoryIcon: 'ğŸ’¬', question: 'Thá»£ má»™c : Gá»— = Thá»£ may : ?', options: ['Kim', 'Váº£i', 'Chá»‰', 'MÃ¡y'], answer: 1 },
                { category: 'verbal', categoryName: 'Verbal Analogies', categoryIcon: 'ğŸ’¬', question: 'Tay : GÄƒng = Äáº§u : ?', options: ['TÃ³c', 'NÃ³n', 'MÅ©', 'KhÄƒn'], answer: 2 },
                { category: 'verbal', categoryName: 'Verbal Analogies', categoryIcon: 'ğŸ’¬', question: 'SÆ° tá»­ : Rá»«ng = CÃ¡ máº­p : ?', options: ['SÃ´ng', 'Biá»ƒn', 'Há»“', 'Ao'], answer: 1 }
            ],

            // ================== Bá»˜ Äá»€ 3 ==================
            set3: [
                // PATTERN (10 cÃ¢u)
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'TÃ¬m hÃ¬nh phÃ¹ há»£p:', matrix: [['â–¼', 'â–²', 'â–¼'], ['â–²', 'â–¼', 'â–²'], ['â–¼', 'â–²', '?']], options: ['â–¼', 'â–²', 'â–º', 'â—„'], answer: 0 },
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'Äiá»n sá»‘ vÃ o ma tráº­n:', matrix: [['3', '9', '27'], ['4', '16', '64'], ['5', '25', '?']], options: ['100', '125', '150', '75'], answer: 1 },
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'XÃ¡c Ä‘á»‹nh quy luáº­t mÃ u:', matrix: [['ğŸ”´', 'ğŸŸ¡', 'ğŸ”µ'], ['ğŸŸ¡', 'ğŸ”µ', 'ğŸ”´'], ['ğŸ”µ', 'ğŸ”´', '?']], options: ['ğŸŸ¡', 'ğŸ”´', 'ğŸ”µ', 'ğŸŸ¢'], answer: 0 },
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'TÃ¬m chá»¯ cÃ²n thiáº¿u:', matrix: [['B', 'D', 'F'], ['H', 'J', 'L'], ['N', 'P', '?']], options: ['Q', 'R', 'S', 'T'], answer: 1 },
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'HoÃ n thÃ nh ma tráº­n:', matrix: [['â™¦', 'â™¦', 'â™£'], ['â™¦', 'â™£', 'â™£'], ['â™£', 'â™£', '?']], options: ['â™¦', 'â™£', 'â™ ', 'â™¥'], answer: 0 },
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'TÃ¬m sá»‘ theo quy luáº­t:', matrix: [['11', '22', '33'], ['44', '55', '66'], ['77', '88', '?']], options: ['99', '100', '89', '90'], answer: 0 },
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'Äiá»n hÃ¬nh vÃ o Ã´ trá»‘ng:', matrix: [['â˜€', 'â˜', 'â˜€'], ['â˜', 'â˜€', 'â˜'], ['â˜€', 'â˜', '?']], options: ['â˜€', 'â˜', 'â­', 'ğŸŒ™'], answer: 0 },
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'XÃ¡c Ä‘á»‹nh pattern:', matrix: [['1', '4', '9'], ['16', '25', '36'], ['49', '64', '?']], options: ['72', '81', '100', '90'], answer: 1 },
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'TÃ¬m kÃ½ tá»± thiáº¿u:', matrix: [['@', '#', '$'], ['#', '$', '%'], ['$', '%', '?']], options: ['@', '&', '^', '*'], answer: 1 },
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'HoÃ n thÃ nh dÃ£y:', matrix: [['X', 'O', 'X'], ['O', 'X', 'O'], ['X', 'O', '?']], options: ['X', 'O', '+', '-'], answer: 0 },
                // NUMBER (8 cÃ¢u)
                { category: 'number', categoryName: 'Number Sequences', categoryIcon: 'ğŸ”¢', question: 'TÃ¬m sá»‘ tiáº¿p theo: 1, 3, 6, 10, 15, ?', options: ['20', '21', '22', '25'], answer: 1 },
                { category: 'number', categoryName: 'Number Sequences', categoryIcon: 'ğŸ”¢', question: 'Sá»‘ nÃ o tiáº¿p theo: 2, 3, 5, 8, 12, ?', options: ['15', '17', '16', '18'], answer: 1 },
                { category: 'number', categoryName: 'Number Sequences', categoryIcon: 'ğŸ”¢', question: 'HoÃ n thÃ nh dÃ£y: 4, 9, 16, 25, 36, ?', options: ['49', '45', '64', '42'], answer: 0 },
                { category: 'number', categoryName: 'Number Sequences', categoryIcon: 'ğŸ”¢', question: 'TÃ¬m sá»‘ tiáº¿p theo: 1000, 500, 250, 125, ?', options: ['62.5', '75', '100', '50'], answer: 0 },
                { category: 'number', categoryName: 'Number Sequences', categoryIcon: 'ğŸ”¢', question: 'DÃ£y sá»‘: 7, 14, 28, 56, ? Sá»‘ tiáº¿p theo lÃ :', options: ['84', '112', '98', '70'], answer: 1 },
                { category: 'number', categoryName: 'Number Sequences', categoryIcon: 'ğŸ”¢', question: 'TÃ¬m quy luáº­t: 5, 11, 23, 47, ?', options: ['95', '94', '93', '96'], answer: 0 },
                { category: 'number', categoryName: 'Number Sequences', categoryIcon: 'ğŸ”¢', question: 'Sá»‘ cÃ²n thiáº¿u: 1, 1, 2, 6, 24, ?', options: ['48', '120', '100', '72'], answer: 1 },
                { category: 'number', categoryName: 'Number Sequences', categoryIcon: 'ğŸ”¢', question: 'HoÃ n thÃ nh: 19, 23, 29, 31, 37, ?', options: ['41', '43', '39', '47'], answer: 0 },
                // SPATIAL (7 cÃ¢u)
                { category: 'spatial', categoryName: 'Spatial Reasoning', categoryIcon: 'ğŸ“', question: 'HÃ¬nh láº­p phÆ°Æ¡ng cÃ³ bao nhiÃªu Ä‘á»‰nh?', options: ['6', '8', '12', '4'], answer: 1 },
                { category: 'spatial', categoryName: 'Spatial Reasoning', categoryIcon: 'ğŸ“', question: 'Láº­t ngÆ°á»£c hÃ¬nh chá»¯ "b", ta Ä‘Æ°á»£c chá»¯ gÃ¬?', options: ['d', 'p', 'q', 'b'], answer: 0 },
                { category: 'spatial', categoryName: 'Spatial Reasoning', categoryIcon: 'ğŸ“', question: 'HÃ¬nh nÃ³n cÃ³ bao nhiÃªu máº·t?', options: ['1', '2', '3', '0'], answer: 1 },
                { category: 'spatial', categoryName: 'Spatial Reasoning', categoryIcon: 'ğŸ“', question: 'Khi nhÃ¬n tá»« bÃªn cáº¡nh, hÃ¬nh trá»¥ cÃ³ dáº¡ng:', options: ['HÃ¬nh chá»¯ nháº­t', 'HÃ¬nh trÃ²n', 'HÃ¬nh elip', 'HÃ¬nh vuÃ´ng'], answer: 0 },
                { category: 'spatial', categoryName: 'Spatial Reasoning', categoryIcon: 'ğŸ“', question: 'Xoay hÃ¬nh tam giÃ¡c Ä‘á»u 120Â°, káº¿t quáº£ lÃ :', options: ['Giá»‘ng hÃ¬nh ban Ä‘áº§u', 'HÃ¬nh khÃ¡c', 'HÃ¬nh lá»™n ngÆ°á»£c', 'HÃ¬nh nghiÃªng'], answer: 0 },
                { category: 'spatial', categoryName: 'Spatial Reasoning', categoryIcon: 'ğŸ“', question: 'HÃ¬nh bÃ¡t diá»‡n Ä‘á»u cÃ³ bao nhiÃªu máº·t?', options: ['6', '8', '10', '12'], answer: 1 },
                { category: 'spatial', categoryName: 'Spatial Reasoning', categoryIcon: 'ğŸ“', question: 'Gáº¥p tam giÃ¡c lÃ m Ä‘Ã´i theo chiá»u cao, Ä‘Æ°á»£c hÃ¬nh:', options: ['Tam giÃ¡c nhá» hÆ¡n', 'HÃ¬nh thang', 'HÃ¬nh chá»¯ nháº­t', 'HÃ¬nh vuÃ´ng'], answer: 0 },
                // VERBAL (5 cÃ¢u)
                { category: 'verbal', categoryName: 'Verbal Analogies', categoryIcon: 'ğŸ’¬', question: 'Äáº§u : MÅ© = ChÃ¢n : ?', options: ['Vá»›', 'GiÃ y', 'Quáº§n', 'DÃ©p'], answer: 1 },
                { category: 'verbal', categoryName: 'Verbal Analogies', categoryIcon: 'ğŸ’¬', question: 'MÃ¡y bay : Phi cÃ´ng = TÃ u : ?', options: ['Thuyá»n trÆ°á»Ÿng', 'LÃ¡i xe', 'HÃ nh khÃ¡ch', 'Tiáº¿p viÃªn'], answer: 0 },
                { category: 'verbal', categoryName: 'Verbal Analogies', categoryIcon: 'ğŸ’¬', question: 'TrÃ¡i cÃ¢y : Vitamin = Thá»‹t : ?', options: ['Cháº¥t bÃ©o', 'Protein', 'ÄÆ°á»ng', 'Tinh bá»™t'], answer: 1 },
                { category: 'verbal', categoryName: 'Verbal Analogies', categoryIcon: 'ğŸ’¬', question: 'SÃ¡ng : Tá»‘i = Ngá»t : ?', options: ['Chua', 'Máº·n', 'Äáº¯ng', 'Cay'], answer: 2 },
                { category: 'verbal', categoryName: 'Verbal Analogies', categoryIcon: 'ğŸ’¬', question: 'Há»a sÄ© : Tranh = NhÃ  vÄƒn : ?', options: ['BÃºt', 'Giáº¥y', 'SÃ¡ch', 'Chá»¯'], answer: 2 }
            ],

            // ================== Bá»˜ Äá»€ 4 ==================
            set4: [
                // PATTERN (10 cÃ¢u)
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'TÃ¬m sá»‘ cÃ²n thiáº¿u:', matrix: [['6', '12', '18'], ['24', '30', '36'], ['42', '48', '?']], options: ['54', '56', '52', '60'], answer: 0 },
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'Äiá»n hÃ¬nh vÃ o ma tráº­n:', matrix: [['â—„', 'â–²', 'â–º'], ['â–¼', 'â—„', 'â–²'], ['â–º', 'â–¼', '?']], options: ['â—„', 'â–²', 'â–º', 'â–¼'], answer: 0 },
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'XÃ¡c Ä‘á»‹nh quy luáº­t:', matrix: [['ğŸŒ‘', 'ğŸŒ“', 'ğŸŒ•'], ['ğŸŒ“', 'ğŸŒ•', 'ğŸŒ—'], ['ğŸŒ•', 'ğŸŒ—', '?']], options: ['ğŸŒ‘', 'ğŸŒ“', 'ğŸŒ•', 'ğŸŒ—'], answer: 0 },
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'TÃ¬m chá»¯ tiáº¿p theo:', matrix: [['A', 'C', 'E'], ['G', 'I', 'K'], ['M', 'O', '?']], options: ['P', 'Q', 'R', 'S'], answer: 1 },
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'HoÃ n thÃ nh pattern:', matrix: [['2', '3', '5'], ['7', '11', '13'], ['17', '19', '?']], options: ['21', '23', '25', '27'], answer: 1 },
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'TÃ¬m hÃ¬nh thiáº¿u:', matrix: [['â–¡', 'â–³', 'â—‹'], ['â–³', 'â—‹', 'â–¡'], ['â—‹', 'â–¡', '?']], options: ['â–¡', 'â–³', 'â—‹', 'â—‡'], answer: 1 },
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'Äiá»n sá»‘ theo quy luáº­t:', matrix: [['1', '8', '27'], ['64', '125', '216'], ['343', '512', '?']], options: ['625', '729', '1000', '648'], answer: 1 },
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'XÃ¡c Ä‘á»‹nh pattern:', matrix: [['â¬†', 'â¬‡', 'â¬†'], ['â¬‡', 'â¬†', 'â¬‡'], ['â¬†', 'â¬‡', '?']], options: ['â¬†', 'â¬‡', 'â¬…', 'â¡'], answer: 0 },
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'TÃ¬m sá»‘ cÃ²n thiáº¿u:', matrix: [['10', '20', '40'], ['80', '160', '320'], ['640', '1280', '?']], options: ['2560', '2000', '1920', '2400'], answer: 0 },
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'HoÃ n thÃ nh ma tráº­n:', matrix: [['1', '2', '4'], ['7', '11', '16'], ['22', '29', '?']], options: ['36', '37', '38', '35'], answer: 1 },
                // NUMBER (8 cÃ¢u)
                { category: 'number', categoryName: 'Number Sequences', categoryIcon: 'ğŸ”¢', question: 'TÃ¬m sá»‘ tiáº¿p theo: 4, 8, 16, 32, 64, ?', options: ['96', '128', '100', '120'], answer: 1 },
                { category: 'number', categoryName: 'Number Sequences', categoryIcon: 'ğŸ”¢', question: 'Sá»‘ nÃ o tiáº¿p theo: 5, 10, 17, 26, 37, ?', options: ['48', '50', '52', '46'], answer: 1 },
                { category: 'number', categoryName: 'Number Sequences', categoryIcon: 'ğŸ”¢', question: 'HoÃ n thÃ nh dÃ£y: 1, 2, 6, 24, 120, ?', options: ['600', '720', '840', '480'], answer: 1 },
                { category: 'number', categoryName: 'Number Sequences', categoryIcon: 'ğŸ”¢', question: 'TÃ¬m sá»‘ tiáº¿p theo: 243, 81, 27, 9, 3, ?', options: ['0', '1', '2', '-1'], answer: 1 },
                { category: 'number', categoryName: 'Number Sequences', categoryIcon: 'ğŸ”¢', question: 'DÃ£y sá»‘: 6, 11, 21, 36, 56, ?', options: ['81', '76', '71', '86'], answer: 0 },
                { category: 'number', categoryName: 'Number Sequences', categoryIcon: 'ğŸ”¢', question: 'TÃ¬m quy luáº­t: 3, 5, 9, 17, 33, ?', options: ['49', '65', '57', '61'], answer: 1 },
                { category: 'number', categoryName: 'Number Sequences', categoryIcon: 'ğŸ”¢', question: 'Sá»‘ cÃ²n thiáº¿u: 169, 144, 121, 100, 81, ?', options: ['64', '49', '72', '56'], answer: 0 },
                { category: 'number', categoryName: 'Number Sequences', categoryIcon: 'ğŸ”¢', question: 'HoÃ n thÃ nh: 8, 11, 15, 20, 26, ?', options: ['32', '33', '34', '31'], answer: 1 },
                // SPATIAL (7 cÃ¢u)
                { category: 'spatial', categoryName: 'Spatial Reasoning', categoryIcon: 'ğŸ“', question: 'HÃ¬nh láº­p phÆ°Æ¡ng cÃ³ bao nhiÃªu máº·t?', options: ['4', '6', '8', '12'], answer: 1 },
                { category: 'spatial', categoryName: 'Spatial Reasoning', categoryIcon: 'ğŸ“', question: 'Xoay chá»¯ "N" 180Â°, ta Ä‘Æ°á»£c chá»¯ gÃ¬?', options: ['Z', 'N', 'M', 'W'], answer: 1 },
                { category: 'spatial', categoryName: 'Spatial Reasoning', categoryIcon: 'ğŸ“', question: 'Kim tá»± thÃ¡p vuÃ´ng cÃ³ bao nhiÃªu cáº¡nh?', options: ['6', '8', '10', '12'], answer: 1 },
                { category: 'spatial', categoryName: 'Spatial Reasoning', categoryIcon: 'ğŸ“', question: 'Khi cáº¯t hÃ¬nh trá»¥ theo chiá»u dá»c, máº·t cáº¯t cÃ³ dáº¡ng:', options: ['HÃ¬nh trÃ²n', 'HÃ¬nh chá»¯ nháº­t', 'HÃ¬nh elip', 'HÃ¬nh vuÃ´ng'], answer: 1 },
                { category: 'spatial', categoryName: 'Spatial Reasoning', categoryIcon: 'ğŸ“', question: 'HÃ¬nh cáº§u khi cáº¯t bá»Ÿi máº·t pháº³ng luÃ´n cho:', options: ['HÃ¬nh trÃ²n', 'HÃ¬nh elip', 'HÃ¬nh vuÃ´ng', 'TÃ¹y cÃ¡ch cáº¯t'], answer: 0 },
                { category: 'spatial', categoryName: 'Spatial Reasoning', categoryIcon: 'ğŸ“', question: 'Gáº¥p hÃ¬nh vuÃ´ng thÃ nh tam giÃ¡c cáº§n máº¥y láº§n gáº¥p?', options: ['1', '2', '3', '4'], answer: 0 },
                { category: 'spatial', categoryName: 'Spatial Reasoning', categoryIcon: 'ğŸ“', question: 'Xoay hÃ¬nh ngÅ© giÃ¡c Ä‘á»u 72Â°, káº¿t quáº£ lÃ :', options: ['Giá»‘ng hÃ¬nh ban Ä‘áº§u', 'HÃ¬nh khÃ¡c', 'HÃ¬nh lá»™n ngÆ°á»£c', 'HÃ¬nh nghiÃªng'], answer: 0 },
                // VERBAL (5 cÃ¢u)
                { category: 'verbal', categoryName: 'Verbal Analogies', categoryIcon: 'ğŸ’¬', question: 'Xe hÆ¡i : XÄƒng = Äiá»‡n thoáº¡i : ?', options: ['SÃ³ng', 'Pin', 'Wifi', 'á»¨ng dá»¥ng'], answer: 1 },
                { category: 'verbal', categoryName: 'Verbal Analogies', categoryIcon: 'ğŸ’¬', question: 'GÃ  : Trá»©ng = Hoa : ?', options: ['LÃ¡', 'Quáº£', 'Háº¡t', 'CÃ nh'], answer: 2 },
                { category: 'verbal', categoryName: 'Verbal Analogies', categoryIcon: 'ğŸ’¬', question: 'SÃ´ng : Biá»ƒn = ÄÆ°á»ng : ?', options: ['Xe', 'ThÃ nh phá»‘', 'NhÃ ', 'CÃ¢y'], answer: 1 },
                { category: 'verbal', categoryName: 'Verbal Analogies', categoryIcon: 'ğŸ’¬', question: 'Lá»­a : NÃ³ng = ÄÃ¡ : ?', options: ['Náº·ng', 'Cá»©ng', 'Láº¡nh', 'Sáº¯c'], answer: 1 },
                { category: 'verbal', categoryName: 'Verbal Analogies', categoryIcon: 'ğŸ’¬', question: 'Báº§u trá»i : MÃ¡y bay = Äáº¡i dÆ°Æ¡ng : ?', options: ['CÃ¡', 'TÃ u', 'SÃ³ng', 'Äáº£o'], answer: 1 }
            ],

            // ================== Bá»˜ Äá»€ 5 ==================
            set5: [
                // PATTERN (10 cÃ¢u)
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'TÃ¬m sá»‘ phÃ¹ há»£p:', matrix: [['8', '16', '24'], ['32', '40', '48'], ['56', '64', '?']], options: ['70', '72', '74', '76'], answer: 1 },
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'Äiá»n hÃ¬nh cÃ²n thiáº¿u:', matrix: [['â—', 'â—‹', 'â—'], ['â—‹', 'â—', 'â—‹'], ['â—', 'â—‹', '?']], options: ['â—', 'â—‹', 'â—', 'â—‘'], answer: 0 },
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'XÃ¡c Ä‘á»‹nh quy luáº­t:', matrix: [['ğŸ', 'ğŸŠ', 'ğŸ‹'], ['ğŸŠ', 'ğŸ‹', 'ğŸ‡'], ['ğŸ‹', 'ğŸ‡', '?']], options: ['ğŸ', 'ğŸŠ', 'ğŸ‹', 'ğŸ‡'], answer: 0 },
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'TÃ¬m chá»¯ cÃ²n thiáº¿u:', matrix: [['C', 'F', 'I'], ['L', 'O', 'R'], ['U', 'X', '?']], options: ['Y', 'Z', 'A', 'B'], answer: 2 },
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'HoÃ n thÃ nh pattern:', matrix: [['1', '4', '7'], ['10', '13', '16'], ['19', '22', '?']], options: ['24', '25', '26', '27'], answer: 1 },
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'TÃ¬m hÃ¬nh thiáº¿u:', matrix: [['â†—', 'â†˜', 'â†™'], ['â†˜', 'â†™', 'â†–'], ['â†™', 'â†–', '?']], options: ['â†—', 'â†˜', 'â†™', 'â†–'], answer: 0 },
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'Äiá»n sá»‘ theo quy luáº­t:', matrix: [['5', '25', '125'], ['6', '36', '216'], ['7', '49', '?']], options: ['343', '294', '392', '441'], answer: 0 },
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'XÃ¡c Ä‘á»‹nh pattern:', matrix: [['Î±', 'Î²', 'Î³'], ['Î²', 'Î³', 'Î´'], ['Î³', 'Î´', '?']], options: ['Î±', 'Îµ', 'Î²', 'Î¶'], answer: 1 },
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'TÃ¬m sá»‘ cÃ²n thiáº¿u:', matrix: [['15', '30', '45'], ['60', '75', '90'], ['105', '120', '?']], options: ['135', '130', '140', '125'], answer: 0 },
                { category: 'pattern', categoryName: 'Pattern Recognition', categoryIcon: 'ğŸ”·', question: 'HoÃ n thÃ nh ma tráº­n:', matrix: [['â™¤', 'â™§', 'â™¡'], ['â™§', 'â™¡', 'â™¢'], ['â™¡', 'â™¢', '?']], options: ['â™¤', 'â™§', 'â™¡', 'â™¢'], answer: 0 },
                // NUMBER (8 cÃ¢u)
                { category: 'number', categoryName: 'Number Sequences', categoryIcon: 'ğŸ”¢', question: 'TÃ¬m sá»‘ tiáº¿p theo: 1, 5, 13, 29, 61, ?', options: ['93', '125', '109', '117'], answer: 1 },
                { category: 'number', categoryName: 'Number Sequences', categoryIcon: 'ğŸ”¢', question: 'Sá»‘ nÃ o tiáº¿p theo: 6, 13, 27, 55, 111, ?', options: ['223', '220', '225', '218'], answer: 0 },
                { category: 'number', categoryName: 'Number Sequences', categoryIcon: 'ğŸ”¢', question: 'HoÃ n thÃ nh dÃ£y: 11, 13, 17, 25, 41, ?', options: ['57', '73', '65', '81'], answer: 1 },
                { category: 'number', categoryName: 'Number Sequences', categoryIcon: 'ğŸ”¢', question: 'TÃ¬m sá»‘ tiáº¿p theo: 625, 125, 25, 5, ?', options: ['0', '1', '2', '-1'], answer: 1 },
                { category: 'number', categoryName: 'Number Sequences', categoryIcon: 'ğŸ”¢', question: 'DÃ£y sá»‘: 2, 9, 28, 65, 126, ?', options: ['189', '217', '196', '225'], answer: 1 },
                { category: 'number', categoryName: 'Number Sequences', categoryIcon: 'ğŸ”¢', question: 'TÃ¬m quy luáº­t: 7, 11, 19, 35, 67, ?', options: ['131', '99', '115', '123'], answer: 0 },
                { category: 'number', categoryName: 'Number Sequences', categoryIcon: 'ğŸ”¢', question: 'Sá»‘ cÃ²n thiáº¿u: 196, 169, 144, 121, 100, ?', options: ['81', '64', '90', '72'], answer: 0 },
                { category: 'number', categoryName: 'Number Sequences', categoryIcon: 'ğŸ”¢', question: 'HoÃ n thÃ nh: 12, 15, 21, 30, 42, ?', options: ['54', '56', '57', '60'], answer: 2 },
                // SPATIAL (7 cÃ¢u)
                { category: 'spatial', categoryName: 'Spatial Reasoning', categoryIcon: 'ğŸ“', question: 'HÃ¬nh lÄƒng trá»¥ tam giÃ¡c cÃ³ bao nhiÃªu Ä‘á»‰nh?', options: ['4', '5', '6', '8'], answer: 2 },
                { category: 'spatial', categoryName: 'Spatial Reasoning', categoryIcon: 'ğŸ“', question: 'Láº­t gÆ°Æ¡ng chá»¯ "E", ta Ä‘Æ°á»£c chá»¯ gÃ¬?', options: ['3', 'Æ', 'W', 'M'], answer: 1 },
                { category: 'spatial', categoryName: 'Spatial Reasoning', categoryIcon: 'ğŸ“', question: 'HÃ¬nh 12 máº·t Ä‘á»u gá»i lÃ  gÃ¬?', options: ['BÃ¡t diá»‡n', 'Tháº­p nhá»‹ diá»‡n', 'Nhá»‹ tháº­p diá»‡n', 'Tá»© diá»‡n'], answer: 1 },
                { category: 'spatial', categoryName: 'Spatial Reasoning', categoryIcon: 'ğŸ“', question: 'Khi cáº¯t hÃ¬nh nÃ³n theo chiá»u Ä‘á»©ng qua Ä‘á»‰nh, máº·t cáº¯t cÃ³ dáº¡ng:', options: ['HÃ¬nh tam giÃ¡c', 'HÃ¬nh trÃ²n', 'HÃ¬nh parabol', 'HÃ¬nh elip'], answer: 0 },
                { category: 'spatial', categoryName: 'Spatial Reasoning', categoryIcon: 'ğŸ“', question: 'Xoay hÃ¬nh lá»¥c giÃ¡c Ä‘á»u 60Â°, káº¿t quáº£ lÃ :', options: ['Giá»‘ng hÃ¬nh ban Ä‘áº§u', 'HÃ¬nh khÃ¡c', 'HÃ¬nh lá»™n ngÆ°á»£c', 'HÃ¬nh nghiÃªng'], answer: 0 },
                { category: 'spatial', categoryName: 'Spatial Reasoning', categoryIcon: 'ğŸ“', question: 'HÃ¬nh láº­p phÆ°Æ¡ng cÃ³ bao nhiÃªu Ä‘Æ°á»ng chÃ©o khÃ´ng gian?', options: ['2', '4', '6', '8'], answer: 1 },
                { category: 'spatial', categoryName: 'Spatial Reasoning', categoryIcon: 'ğŸ“', question: 'Gáº¥p hÃ¬nh trÃ²n lÃ m tÆ°, gÃ³c á»Ÿ tÃ¢m báº±ng:', options: ['45Â°', '90Â°', '180Â°', '120Â°'], answer: 1 },
                // VERBAL (5 cÃ¢u)
                { category: 'verbal', categoryName: 'Verbal Analogies', categoryIcon: 'ğŸ’¬', question: 'MÃ¹a xuÃ¢n : Hoa = MÃ¹a thu : ?', options: ['Náº¯ng', 'LÃ¡', 'Tuyáº¿t', 'MÆ°a'], answer: 1 },
                { category: 'verbal', categoryName: 'Verbal Analogies', categoryIcon: 'ğŸ’¬', question: 'Kiáº¿n trÃºc sÆ° : TÃ²a nhÃ  = Äáº§u báº¿p : ?', options: ['NhÃ  hÃ ng', 'MÃ³n Äƒn', 'Dao', 'Báº¿p'], answer: 1 },
                { category: 'verbal', categoryName: 'Verbal Analogies', categoryIcon: 'ğŸ’¬', question: 'Giáº¥y : CÃ¢y = Thá»§y tinh : ?', options: ['NÆ°á»›c', 'CÃ¡t', 'ÄÃ¡', 'Kim loáº¡i'], answer: 1 },
                { category: 'verbal', categoryName: 'Verbal Analogies', categoryIcon: 'ğŸ’¬', question: 'NgÃ³n tay : BÃ n tay = CÃ¡nh hoa : ?', options: ['CÃ nh', 'LÃ¡', 'BÃ´ng hoa', 'Rá»…'], answer: 2 },
                { category: 'verbal', categoryName: 'Verbal Analogies', categoryIcon: 'ğŸ’¬', question: 'NgÃ y : Tuáº§n = Tuáº§n : ?', options: ['NÄƒm', 'ThÃ¡ng', 'Giá»', 'PhÃºt'], answer: 1 }
            ]
        };

        // ============================================
        // STATE & LOGIC
        // ============================================
        let currentQuestion = 0;
        let answers = [];
        let questions = [];
        let selectedSet = '';
        let startTime;
        let timerInterval;
        let userName = '';
        let userEmail = '';
        let department = '';
        const TIME_LIMIT = 25 * 60;

        function startTest() {
            userName = document.getElementById('userName').value.trim();
            userEmail = document.getElementById('userEmail').value.trim();
            department = document.getElementById('department').value;

            if (!userName) { alert('Vui lÃ²ng nháº­p há» vÃ  tÃªn!'); return; }
            if (!userEmail) { alert('Vui lÃ²ng nháº­p email cÃ´ng ty!'); return; }

            // Random chá»n 1 trong 5 bá»™ Ä‘á»
            const setNames = Object.keys(questionSets);
            selectedSet = setNames[Math.floor(Math.random() * setNames.length)];
            questions = questionSets[selectedSet];
            answers = new Array(questions.length).fill(null);

            console.log('Bá»™ Ä‘á» Ä‘Æ°á»£c chá»n:', selectedSet);

            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('testScreen').classList.remove('hidden');

            startTime = Date.now();
            startTimer();
            renderQuestion();
        }

        function startTimer() {
            let timeLeft = TIME_LIMIT;
            updateTimerDisplay(timeLeft);
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay(timeLeft);
                if (timeLeft <= 0) { clearInterval(timerInterval); submitTest(); }
            }, 1000);
        }

        function updateTimerDisplay(seconds) {
            const minutes = Math.floor(seconds / 60);
            const secs = seconds % 60;
            const timerEl = document.getElementById('timer');
            timerEl.textContent = `${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            if (seconds <= 60) timerEl.classList.add('timer-warning');
        }

        function renderQuestion() {
            const q = questions[currentQuestion];
            document.getElementById('currentQ').textContent = currentQuestion + 1;
            document.getElementById('progressBar').style.width = `${((currentQuestion + 1) / questions.length) * 100}%`;
            document.getElementById('categoryName').textContent = q.categoryName;
            document.getElementById('categoryBadge').querySelector('span:first-child').textContent = q.categoryIcon;
            document.getElementById('questionText').textContent = q.question;

            const visualArea = document.getElementById('visualArea');
            if (q.matrix) {
                visualArea.innerHTML = renderMatrix(q.matrix);
                visualArea.classList.remove('hidden');
            } else {
                visualArea.innerHTML = '';
                visualArea.classList.add('hidden');
            }

            const optionsArea = document.getElementById('optionsArea');
            const letters = ['A', 'B', 'C', 'D'];
            
            if (q.category === 'pattern' && q.matrix) {
                optionsArea.innerHTML = q.options.map((opt, idx) => `
                    <button class="option-btn ${answers[currentQuestion] === idx ? 'selected' : ''}" onclick="selectAnswer(${idx})">
                        <span class="option-letter">${letters[idx]}</span>
                        <div class="option-visual">${opt}</div>
                    </button>
                `).join('');
            } else {
                optionsArea.innerHTML = q.options.map((opt, idx) => `
                    <button class="option-btn ${answers[currentQuestion] === idx ? 'selected' : ''}" onclick="selectAnswer(${idx})">
                        <span class="option-letter">${letters[idx]}</span>
                        <span class="option-content">${opt}</span>
                    </button>
                `).join('');
            }

            document.getElementById('prevBtn').disabled = currentQuestion === 0;
            document.getElementById('nextBtn').innerHTML = currentQuestion === questions.length - 1 ? 'Ná»™p bÃ i <span>âœ“</span>' : 'CÃ¢u tiáº¿p <span>â†’</span>';
        }

        function renderMatrix(matrix) {
            return `<div class="matrix matrix-3x3">${matrix.flat().map(cell => `<div class="matrix-cell ${cell === '?' ? 'question-mark' : ''}">${cell}</div>`).join('')}</div>`;
        }

        function selectAnswer(idx) { answers[currentQuestion] = idx; renderQuestion(); }
        function prevQuestion() { if (currentQuestion > 0) { currentQuestion--; renderQuestion(); } }
        function nextQuestion() { if (currentQuestion < questions.length - 1) { currentQuestion++; renderQuestion(); } else { submitTest(); } }

        function submitTest() {
            clearInterval(timerInterval);
            const endTime = Date.now();
            const timeTakenSeconds = Math.floor((endTime - startTime) / 1000);

            let totalCorrect = 0;
            let categoryScores = { pattern: { correct: 0, total: 10 }, number: { correct: 0, total: 8 }, spatial: { correct: 0, total: 7 }, verbal: { correct: 0, total: 5 } };

            questions.forEach((q, idx) => {
                if (answers[idx] === q.answer) {
                    totalCorrect++;
                    categoryScores[q.category].correct++;
                }
            });

            const percentage = (totalCorrect / questions.length) * 100;
            let iq, percentile, classification;

            if (percentage >= 97) { iq = 145; percentile = 99; classification = 'Xuáº¥t sáº¯c (ThiÃªn tÃ i)'; }
            else if (percentage >= 93) { iq = 135; percentile = 99; classification = 'Ráº¥t cao (Highly Gifted)'; }
            else if (percentage >= 87) { iq = 125; percentile = 95; classification = 'Cao (Gifted)'; }
            else if (percentage >= 80) { iq = 115; percentile = 84; classification = 'TrÃªn trung bÃ¬nh'; }
            else if (percentage >= 70) { iq = 110; percentile = 75; classification = 'TrÃªn trung bÃ¬nh'; }
            else if (percentage >= 57) { iq = 105; percentile = 63; classification = 'Trung bÃ¬nh cao'; }
            else if (percentage >= 43) { iq = 100; percentile = 50; classification = 'Trung bÃ¬nh'; }
            else if (percentage >= 30) { iq = 95; percentile = 37; classification = 'Trung bÃ¬nh'; }
            else if (percentage >= 20) { iq = 90; percentile = 25; classification = 'Trung bÃ¬nh tháº¥p'; }
            else if (percentage >= 13) { iq = 85; percentile = 16; classification = 'DÆ°á»›i trung bÃ¬nh'; }
            else { iq = 80; percentile = 9; classification = 'Cáº§n cáº£i thiá»‡n'; }

            showResults(totalCorrect, iq, percentile, classification, categoryScores, timeTakenSeconds);
        }

        function showResults(correct, iq, percentile, classification, categoryScores, timeTakenSeconds) {
            document.getElementById('testScreen').classList.add('hidden');
            document.getElementById('resultsScreen').classList.remove('hidden');

            document.getElementById('iqScore').textContent = iq;
            document.getElementById('classification').textContent = classification;
            document.getElementById('correctCount').textContent = correct;
            document.getElementById('percentile').textContent = percentile + '%';

            const mins = Math.floor(timeTakenSeconds / 60);
            const secs = timeTakenSeconds % 60;
            document.getElementById('timeTaken').textContent = `${mins}:${secs.toString().padStart(2, '0')}`;

            const descriptions = {
                'Xuáº¥t sáº¯c (ThiÃªn tÃ i)': 'NÄƒng lá»±c nháº­n thá»©c vÆ°á»£t trá»™i, thuá»™c top 1% dÃ¢n sá»‘.',
                'Ráº¥t cao (Highly Gifted)': 'NÄƒng lá»±c nháº­n thá»©c ráº¥t cao, há»c há»i nhanh.',
                'Cao (Gifted)': 'NÄƒng lá»±c tÆ° duy logic vÃ  giáº£i quyáº¿t váº¥n Ä‘á» tá»‘t.',
                'TrÃªn trung bÃ¬nh': 'Kháº£ nÄƒng nháº­n thá»©c tá»‘t, xá»­ lÃ½ cÃ´ng viá»‡c phá»©c táº¡p.',
                'Trung bÃ¬nh cao': 'NÄƒng lá»±c nháº­n thá»©c khÃ¡, Ä‘Ã¡p á»©ng tá»‘t yÃªu cáº§u.',
                'Trung bÃ¬nh': 'NÄƒng lá»±c nháº­n thá»©c á»Ÿ má»©c trung bÃ¬nh.',
                'Trung bÃ¬nh tháº¥p': 'CÃ³ thá»ƒ cáº§n há»— trá»£ thÃªm trong nhiá»‡m vá»¥ phá»©c táº¡p.',
                'DÆ°á»›i trung bÃ¬nh': 'NÃªn táº­p trung vÃ o cÃ´ng viá»‡c cÃ³ quy trÃ¬nh rÃµ rÃ ng.',
                'Cáº§n cáº£i thiá»‡n': 'Khuyáº¿n nghá»‹ Ä‘Ã o táº¡o thÃªm Ä‘á»ƒ nÃ¢ng cao nÄƒng lá»±c.'
            };
            document.getElementById('resultDesc').textContent = descriptions[classification] || '';

            setTimeout(() => {
                document.getElementById('patternBar').style.width = (categoryScores.pattern.correct / categoryScores.pattern.total * 100) + '%';
                document.getElementById('numberBar').style.width = (categoryScores.number.correct / categoryScores.number.total * 100) + '%';
                document.getElementById('spatialBar').style.width = (categoryScores.spatial.correct / categoryScores.spatial.total * 100) + '%';
                document.getElementById('verbalBar').style.width = (categoryScores.verbal.correct / categoryScores.verbal.total * 100) + '%';
                document.getElementById('patternScore').textContent = `${categoryScores.pattern.correct}/${categoryScores.pattern.total}`;
                document.getElementById('numberScore').textContent = `${categoryScores.number.correct}/${categoryScores.number.total}`;
                document.getElementById('spatialScore').textContent = `${categoryScores.spatial.correct}/${categoryScores.spatial.total}`;
                document.getElementById('verbalScore').textContent = `${categoryScores.verbal.correct}/${categoryScores.verbal.total}`;
            }, 300);

            window.testResult = {
                name: userName,
                email: userEmail,
                department: department,
                testSet: selectedSet.replace('set', 'Bá»™ Ä‘á» '),
                date: new Date().toLocaleDateString('vi-VN'),
                datetime: new Date().toISOString(),
                iq: iq,
                percentile: percentile,
                classification: classification,
                correct: correct,
                total: questions.length,
                timeTaken: `${mins}:${secs.toString().padStart(2, '0')}`,
                categories: categoryScores
            };

            saveToGoogleSheets(window.testResult);
        }

        async function saveToGoogleSheets(result) {
            const statusEl = document.getElementById('saveStatus');
            
            if (CONFIG.GOOGLE_SCRIPT_URL === 'YOUR_GOOGLE_APPS_SCRIPT_WEB_APP_URL') {
                statusEl.className = 'save-status error';
                statusEl.innerHTML = 'âš ï¸ ChÆ°a cáº¥u hÃ¬nh Google Sheets.';
                return;
            }

            try {
                await fetch(CONFIG.GOOGLE_SCRIPT_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        timestamp: result.datetime,
                        name: result.name,
                        email: result.email,
                        department: result.department,
                        testSet: result.testSet,
                        iq: result.iq,
                        percentile: result.percentile,
                        classification: result.classification,
                        correctAnswers: result.correct,
                        totalQuestions: result.total,
                        timeTaken: result.timeTaken,
                        patternScore: `${result.categories.pattern.correct}/${result.categories.pattern.total}`,
                        numberScore: `${result.categories.number.correct}/${result.categories.number.total}`,
                        spatialScore: `${result.categories.spatial.correct}/${result.categories.spatial.total}`,
                        verbalScore: `${result.categories.verbal.correct}/${result.categories.verbal.total}`
                    })
                });
                statusEl.className = 'save-status';
                statusEl.innerHTML = 'âœ… Káº¿t quáº£ Ä‘Ã£ Ä‘Æ°á»£c lÆ°u thÃ nh cÃ´ng!';
            } catch (error) {
                statusEl.className = 'save-status error';
                statusEl.innerHTML = 'âŒ Lá»—i khi lÆ°u. Vui lÃ²ng táº£i file vá».';
            }
        }

        function downloadResult() {
            const r = window.testResult;
            const text = `
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        Káº¾T QUáº¢ BÃ€I TEST IQ - ${r.testSet.toUpperCase()}
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Há» vÃ  tÃªn:     ${r.name}
Email:         ${r.email}
PhÃ²ng ban:     ${r.department || 'ChÆ°a xÃ¡c Ä‘á»‹nh'}
NgÃ y lÃ m bÃ i:  ${r.date}
Bá»™ Ä‘á»:         ${r.testSet}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                 Káº¾T QUáº¢ Tá»”NG QUAN
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ“Š ÄIá»‚M IQ:        ${r.iq}
ğŸ“ˆ PERCENTILE:     ${r.percentile}%
ğŸ¯ PHÃ‚N LOáº I:      ${r.classification}
âœ… Sá» CÃ‚U ÄÃšNG:    ${r.correct}/${r.total}
â±ï¸ THá»œI GIAN:      ${r.timeTaken}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
              CHI TIáº¾T THEO DANH Má»¤C
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ”· Pattern Recognition:  ${r.categories.pattern.correct}/${r.categories.pattern.total}
ğŸ”¢ Number Sequences:     ${r.categories.number.correct}/${r.categories.number.total}
ğŸ“ Spatial Reasoning:    ${r.categories.spatial.correct}/${r.categories.spatial.total}
ğŸ’¬ Verbal Analogies:     ${r.categories.verbal.correct}/${r.categories.verbal.total}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            `.trim();

            const blob = new Blob([text], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `KetQua_IQ_${r.name.replace(/\s+/g, '_')}_${r.date.replace(/\//g, '-')}.txt`;
            a.click();
            URL.revokeObjectURL(url);
        }

        function restartTest() {
            currentQuestion = 0;
            answers = [];
            questions = [];
            document.getElementById('resultsScreen').classList.add('hidden');
            document.getElementById('startScreen').classList.remove('hidden');
            document.getElementById('userName').value = '';
            document.getElementById('userEmail').value = '';
            document.getElementById('department').value = '';
            document.getElementById('timer').classList.remove('timer-warning');
        }
    </script>
</body>
</html>
